<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>EventSphere</title>

<link rel="icon" href="data:,">

<style>

body{
font-family:Arial, Helvetica, sans-serif;
background:#acadf3;
margin:0;
}

.navbar{
background:#5f62f0;
color:black;
padding:18px;
font-size:35px;
text-align:center;
font-weight:bold;
font-family: Arial, Helvetica, sans-serif;
}

.container{
max-width:900px;
margin:auto;
padding:30px;
}

.section{
background:#b7b8de;
padding:20px;
border-radius:12px;
box-shadow:0 4px 12px rgba(0,0,0,0.08);
margin-bottom:25px;
}

input, textarea{
width:100%;
padding:10px;
margin:8px 0;
border-radius:6px;
border:1px solid #ccc;
}

button{
background:#2563eb;
color:white;
border:none;
padding:10px 15px;
border-radius:6px;
cursor:pointer;
font-size:14px;
}

button:hover{
background:#1e40af;
}

.card{
background:white;
padding:20px;
margin-top:15px;
border-radius:10px;
box-shadow:0 3px 10px rgba(0,0,0,0.1);
transition:0.3s;
}

.card:hover{
transform:scale(1.02);
}

.actions{
margin-top:10px;
}

.delete{
background:red;
margin-left:10px;
}

.register{
background:green;
}

</style>
</head>

<body>

<div class="navbar">EventSphere</div>

<div class="container">

<!-- CREATE EVENT -->
<div class="section">
<h2>Create Event</h2>

<input id="title" placeholder="Event Title">
<input id="date" type="date">
<input id="location" placeholder="Location">
<textarea id="description" placeholder="Description"></textarea>

<button onclick="addEvent()">Create Event</button>

</div>

<!-- EVENT LIST -->
<div class="section">
<h2>Upcoming Events</h2>
<div id="events"></div>
</div>

</div>

<script>

/* LOAD EVENTS */
async function loadEvents(){

const res = await fetch("/api/events");
const data = await res.json();

const container = document.getElementById("events");
container.innerHTML="";

data.forEach(e=>{

container.innerHTML += `
<div class="card">

<h3>${e.title}</h3>

<p><b>Date:</b> ${e.date}</p>
<p><b>Location:</b> ${e.location}</p>
<p>${e.description}</p>

<div class="actions">
<button class="register" onclick="registerEvent('${e.id}')">
Register
</button>

<button class="delete" onclick="deleteEvent('${e.id}')">
Delete
</button>
</div>

</div>
`;

});
}

/* CREATE EVENT */
async function addEvent(){

const event={
title:title.value,
date:date.value,
location:location.value,
description:description.value
};

await fetch("/api/events",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify(event)
});

/* clear form */
title.value="";
date.value="";
location.value="";
description.value="";

loadEvents();
}

/* DELETE EVENT */
async function deleteEvent(id){

await fetch("/api/events/"+id,{
method:"DELETE"
});

loadEvents();
}

/* REGISTER EVENT */
async function registerEvent(id){

await fetch("/api/register",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({
eventId:id,
user:"Student"
})
});

alert("âœ… Successfully Registered!");
}

/* INITIAL LOAD */
loadEvents();

</script>

</body>
</html>