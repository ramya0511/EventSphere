<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Admin Panel</title>

<style>
body{background:#eef2ff;font-family:Arial;margin:0;}
.nav{background:#4338ca;color:white;padding:15px;text-align:center;font-size:25px;}
.container{width:80%;margin:auto;padding:20px;}
.card{background:white;padding:20px;margin:10px 0;border-radius:10px;}
button{padding:8px 12px;border:none;color:white;background:red;border-radius:5px;cursor:pointer;}
input{width:100%;padding:10px;margin:5px 0;}
</style>

</head>

<body>

<script>
if(localStorage.getItem("role")!=="admin"){
window.location="login.html";
}
</script>

<div class="nav">
Admin Dashboard
<button onclick="logout()" style="float:right;background:black">Logout</button>
</div>

<div class="container">

<h2>Create Event</h2>

<input id="title" placeholder="Title">
<input id="date" type="date">
<input id="location" placeholder="Location">
<textarea id="description" placeholder="Description"></textarea>

<button onclick="create()" style="background:green">Create Event</button>

<h2>Manage Events</h2>
<div id="events"></div>

</div>

<script>

function logout(){
localStorage.removeItem("role");
window.location="login.html";
}

async function load(){
let res=await fetch("/api/events");
let data=await res.json();

let html="";
data.forEach(e=>{
html+=`
<div class="card">
<h3>${e.title}</h3>
<p>${e.location}</p>
<button onclick="del('${e.id}')">Delete</button>
</div>`;
});

events.innerHTML=html;
}

async function create(){

await fetch("/api/events",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({
title:title.value,
date:date.value,
location:location.value,
description:description.value
})
});

title.value="";
date.value="";
location.value="";
description.value="";

load();
}

async function del(id){
await fetch("/api/events/"+id,{method:"DELETE"});
load();
}

load();

</script>

</body>
</html>