<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Admin Dashboard</title>

<style>
body{background:#eef2ff;font-family:Arial;margin:0;}
.nav{
background:#4338ca;
color:white;
padding:15px;
font-size:25px;
display:flex;
justify-content:space-between;
align-items:center;
}
.container{width:80%;margin:auto;padding:20px;}
.card{
background:white;
padding:20px;
margin:15px 0;
border-radius:10px;
box-shadow:0 4px 10px rgba(0,0,0,0.1);
}
input,textarea{
width:100%;
padding:10px;
margin:8px 0;
border-radius:6px;
border:1px solid #ccc;
}
button{
padding:8px 12px;
border:none;
border-radius:5px;
cursor:pointer;
color:white;
}
.createBtn{background:green;}
.deleteBtn{background:red;margin-top:10px;}
.logoutBtn{background:black;}
</style>
</head>

<body>

<script>
if(localStorage.getItem("role")!=="admin"){
window.location="login.html";
}
</script>

<div class="nav">
<span>Admin Dashboard</span>
<div>
<a href="index.html" style="color:white;margin-right:20px;">Student View</a>
<button class="logoutBtn" onclick="logout()">Logout</button>
</div>
</div>

<div class="container">

<h2>Create Event</h2>

<input id="title" placeholder="Title">
<input id="date" type="date">
<input id="location" placeholder="Location">
<textarea id="description" placeholder="Description"></textarea>

<button class="createBtn" onclick="create()">Create Event</button>

<h2>Manage Events</h2>
<div id="events"></div>

</div>

<script>

function logout(){
localStorage.removeItem("role");
window.location="login.html";
}

async function load(){
let res=await fetch("/api/events");
let data=await res.json();

let html="";

data.forEach(e=>{
html+=`
<div class="card">
<h3>${e.title}</h3>
<p><b>Date:</b> ${e.date}</p>
<p><b>Location:</b> ${e.location}</p>
<p>${e.description}</p>
<button class="deleteBtn" onclick="del('${e.id}')">
Delete
</button>
</div>`;
});

events.innerHTML=html;
}

async function create(){

await fetch("/api/events",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({
title:title.value,
date:date.value,
location:location.value,
description:description.value
})
});

title.value="";
date.value="";
location.value="";
description.value="";

load();
}

async function del(id){
await fetch("/api/events/"+id,{method:"DELETE"});
load();
}

load();

</script>

</body>
</html>